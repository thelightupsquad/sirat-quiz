<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>рж╕рзАрж░рж╛рждрзБржи ржиржмрзА я╖║ ржкрзНрж░рждрж┐ржпрзЛржЧрж┐рждрж╛</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.js"></script>
    <style>
        * { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: linear-gradient(135deg, #d1fae5 0%, #99f6e4 100%); }
    </style>
</head>
<body class="min-h-screen">
    <div id="app"></div>

    <script>
        // ржкрзНрж░рж╢рзНржи ржбрж╛ржЯрж╛ (ржПржЦрж╛ржирзЗ ржЖржкржирж╛рж░ рззрзжрзжржЯрж┐ ржкрзНрж░рж╢рзНржи ржпрзЛржЧ ржХрж░ржмрзЗржи)
        const QUESTIONS = [
            {
                id: 1,
                type: 'mcq',
                question: 'рж░рж╛рж╕рзВрж▓рзБрж▓рзНрж▓рж╛рж╣ я╖║ ржХрзЛржи рж╕рж╛рж▓рзЗ ржЬржирзНржоржЧрзНрж░рж╣ржг ржХрж░рзЗржи?',
                options: ['рзлрзнрзж ржЦрзНрж░рж┐рж╕рзНржЯрж╛ржмрзНржж', 'рзлрзмрзж ржЦрзНрж░рж┐рж╕рзНржЯрж╛ржмрзНржж', 'рзлрзорзж ржЦрзНрж░рж┐рж╕рзНржЯрж╛ржмрзНржж', 'рзлрзпрзж ржЦрзНрж░рж┐рж╕рзНржЯрж╛ржмрзНржж'],
                correctAnswer: 0
            },
            {
                id: 2,
                type: 'mcq',
                question: 'рж░рж╛рж╕рзВрж▓рзБрж▓рзНрж▓рж╛рж╣ я╖║ ржПрж░ ржкрж┐рждрж╛рж░ ржирж╛ржо ржХрзА?',
                options: ['ржЖржмрзБ рждрж╛рж▓рж┐ржм', 'ржЖржмржжрзБрж▓рзНрж▓рж╛рж╣', 'ржЖржмржжрзБрж▓ ржорзБрждрзНрждрж╛рж▓рж┐ржм', 'ржЖржмрзБ ржмржХрж░'],
                correctAnswer: 1
            },
            {
                id: 3,
                type: 'mcq',
                question: 'рж░рж╛рж╕рзВрж▓рзБрж▓рзНрж▓рж╛рж╣ я╖║ ржПрж░ ржжрзБржз ржорж╛рждрж╛рж░ ржирж╛ржо ржХрзА?',
                options: ['ржЖржорж┐ржирж╛', 'рж╣рж╛рж▓рж┐ржорж╛', 'ржЦрж╛ржжрж┐ржЬрж╛', 'ржЖржпрж╝рж┐рж╢рж╛'],
                correctAnswer: 1
            },
            {
                id: 4,
                type: 'mcq',
                question: 'ржкрзНрж░ржержо ржХрзЛржи ржорж╣рж┐рж▓рж╛ ржЗрж╕рж▓рж╛ржо ржЧрзНрж░рж╣ржг ржХрж░рзЗржи?',
                options: ['ржЖржпрж╝рж┐рж╢рж╛ рж░рж╛.', 'ржлрж╛рждрж┐ржорж╛ рж░рж╛.', 'ржЦрж╛ржжрж┐ржЬрж╛ рж░рж╛.', 'рж╣рж╛ржлрж╕рж╛ рж░рж╛.'],
                correctAnswer: 2
            },
            {
                id: 5,
                type: 'mcq',
                question: 'рж╣рж┐ржЬрж░рждрзЗрж░ рж╕ржоржпрж╝ рж░рж╛рж╕рзВрж▓рзБрж▓рзНрж▓рж╛рж╣ я╖║ ржПрж░ рж╕рж╛ржерзА ржХрзЗ ржЫрж┐рж▓рзЗржи?',
                options: ['ржЙржорж░ рж░рж╛.', 'ржЖржмрзБ ржмржХрж░ рж░рж╛.', 'ржЙрж╕ржорж╛ржи рж░рж╛.', 'ржЖрж▓рзА рж░рж╛.'],
                correctAnswer: 1
            },
            {
                id: 6,
                type: 'mcq',
                question: 'ржмржжрж░ ржпрзБржжрзНржз ржХрзЛржи рж╕рж╛рж▓рзЗ рж╕ржВржШржЯрж┐ржд рж╣ржпрж╝?',
                options: ['рзи рж╣рж┐ржЬрж░рзА', 'рзй рж╣рж┐ржЬрж░рзА', 'рзк рж╣рж┐ржЬрж░рзА', 'рзл рж╣рж┐ржЬрж░рзА'],
                correctAnswer: 0
            },
            {
                id: 7,
                type: 'mcq',
                question: 'ржЙрж╣рзБржж ржпрзБржжрзНржзрзЗ рж░рж╛рж╕рзВрж▓рзБрж▓рзНрж▓рж╛рж╣ я╖║ ржПрж░ ржХржпрж╝ржЯрж┐ ржжрж╛ржБржд рж╢рж╣рзАржж рж╣ржпрж╝?',
                options: ['рззржЯрж┐', 'рзиржЯрж┐', 'рзйржЯрж┐', 'рзкржЯрж┐'],
                correctAnswer: 1
            },
            {
                id: 8,
                type: 'mcq',
                question: 'ржоржХрзНржХрж╛ ржмрж┐ржЬржпрж╝ ржХрзЛржи рж╕рж╛рж▓рзЗ рж╣ржпрж╝?',
                options: ['рзм рж╣рж┐ржЬрж░рзА', 'рзн рж╣рж┐ржЬрж░рзА', 'рзо рж╣рж┐ржЬрж░рзА', 'рзп рж╣рж┐ржЬрж░рзА'],
                correctAnswer: 2
            },
            {
                id: 9,
                type: 'short',
                question: 'рж░рж╛рж╕рзВрж▓рзБрж▓рзНрж▓рж╛рж╣ я╖║ ржПрж░ ржорж╛рждрж╛рж░ ржирж╛ржо рж▓рж┐ржЦрзБржиред'
            },
            {
                id: 10,
                type: 'short',
                question: 'ржорж┐\'рж░рж╛ржЬ ржХрзЛржи рж╢рж╣рж░ ржерзЗржХрзЗ рж╕ржВржШржЯрж┐ржд рж╣ржпрж╝рзЗржЫрж┐рж▓?'
            }
        ];

        // State Management
        let state = {
            view: 'start',
            participant: { name: '', phone: '' },
            answers: {},
            currentQuestion: 0,
            timeLeft: 60 * 60,
            startTime: null,
            submissions: [],
            timerInterval: null
        };

        // Load submissions from localStorage
        function loadSubmissions() {
            const saved = localStorage.getItem('sirat_submissions');
            if (saved) {
                state.submissions = JSON.parse(saved);
            }
        }

        // Save submission to localStorage
        function saveSubmission(submission) {
            state.submissions.push(submission);
            localStorage.setItem('sirat_submissions', JSON.stringify(state.submissions));
        }

        // Format time
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // Start quiz
        function startQuiz() {
            if (!state.participant.name || !state.participant.phone) {
                alert('ржжржпрж╝рж╛ ржХрж░рзЗ ржирж╛ржо ржУ ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░ ржжрж┐ржи');
                return;
            }
            state.startTime = new Date();
            state.view = 'quiz';
            startTimer();
            render();
        }

        // Start timer
        function startTimer() {
            state.timerInterval = setInterval(() => {
                state.timeLeft--;
                if (state.timeLeft <= 0) {
                    submitQuiz();
                }
                updateTimer();
            }, 1000);
        }

        // Update timer display
        function updateTimer() {
            const timerEl = document.getElementById('timer');
            if (timerEl) {
                timerEl.textContent = formatTime(state.timeLeft);
            }
        }

        // Submit quiz
        function submitQuiz() {
            clearInterval(state.timerInterval);
            
            const endTime = new Date();
            const timeTaken = Math.floor((endTime - state.startTime) / 1000);
            
            const mcqQuestions = QUESTIONS.filter(q => q.type === 'mcq');
            let correct = 0, wrong = 0;
            
            mcqQuestions.forEach(q => {
                if (state.answers[q.id] !== undefined) {
                    if (state.answers[q.id] === q.correctAnswer) {
                        correct++;
                    } else {
                        wrong++;
                    }
                }
            });

            const shortAnswers = QUESTIONS
                .filter(q => q.type === 'short')
                .map(q => ({
                    question: q.question,
                    answer: state.answers[q.id] || 'ржЙрждрзНрждрж░ ржжрзЗржиржирж┐'
                }));

            const submission = {
                name: state.participant.name,
                phone: state.participant.phone,
                mcqCorrect: correct,
                mcqWrong: wrong,
                mcqUnanswered: mcqQuestions.length - correct - wrong,
                shortAnswers: shortAnswers,
                timeTaken: formatTime(timeTaken),
                submittedAt: new Date().toLocaleString('bn-BD')
            };

            saveSubmission(submission);
            state.view = 'submitted';
            render();
        }

        // Render functions
        function renderStartScreen() {
            return `
                <div class="max-w-2xl mx-auto mt-10 p-4">
                    <div class="bg-white rounded-2xl shadow-2xl p-8">
                        <div class="text-center mb-8">
                            <h1 class="text-4xl font-bold text-green-800 mb-2">
                                рж╕рзАрж░рж╛рждрзБржи ржиржмрзА я╖║ ржкрзНрж░рждрж┐ржпрзЛржЧрж┐рждрж╛
                            </h1>
                            <p class="text-gray-600">рж░рж╛рж╕рзВрж▓рзБрж▓рзНрж▓рж╛рж╣ я╖║ ржПрж░ ржЬрзАржмржирзА ржирж┐ржпрж╝рзЗ ржЬрзНржЮрж╛ржи ржкрзНрж░рждрж┐ржпрзЛржЧрж┐рждрж╛</p>
                        </div>

                        <div class="bg-green-50 rounded-xl p-6 mb-6">
                            <h3 class="font-bold text-green-900 mb-3">ржкрзНрж░рждрж┐ржпрзЛржЧрж┐рждрж╛рж░ ржмрж┐ржмрж░ржг:</h3>
                            <ul class="space-y-2 text-gray-700">
                                <li>ЁЯУЭ ржорзЛржЯ ржкрзНрж░рж╢рзНржи: рззрзжрзжржЯрж┐ (рзпрзжржЯрж┐ MCQ + рззрзжржЯрж┐ рж╕ржВржХрзНрж╖рж┐ржкрзНржд)</li>
                                <li>тП░ рж╕ржоржпрж╝: рзз ржШржирзНржЯрж╛ (рзмрзж ржорж┐ржирж┐ржЯ)</li>
                                <li>тЬЕ ржПржХржмрж╛рж░ рж╢рзБрж░рзБ ржХрж░рж▓рзЗ ржерж╛ржорж╛ржирзЛ ржпрж╛ржмрзЗ ржирж╛</li>
                                <li>ЁЯОп рж╕ржм ржкрзНрж░рж╢рзНржирзЗрж░ ржЙрждрзНрждрж░ ржжрзЗржУржпрж╝рж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржи</li>
                            </ul>
                        </div>

                        <div class="space-y-4 mb-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    ЁЯСд ржЖржкржирж╛рж░ ржирж╛ржо *
                                </label>
                                <input
                                    type="text"
                                    id="name"
                                    class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none"
                                    placeholder="ржкрзВрж░рзНржг ржирж╛ржо рж▓рж┐ржЦрзБржи"
                                />
                            </div>

                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">
                                    ЁЯУ▒ ржорзЛржмрж╛ржЗрж▓ ржиржорзНржмрж░ *
                                </label>
                                <input
                                    type="tel"
                                    id="phone"
                                    class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none"
                                    placeholder="рзжрззXXXXXXXXX"
                                />
                            </div>
                        </div>

                        <button
                            onclick="startQuizHandler()"
                            class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-xl transition duration-200 text-lg"
                        >
                            ржкрзНрж░рждрж┐ржпрзЛржЧрж┐рждрж╛ рж╢рзБрж░рзБ ржХрж░рзБржи
                        </button>

                        <div class="mt-6 text-center">
                            <button
                                onclick="adminLogin()"
                                class="text-sm text-gray-500 hover:text-gray-700"
                            >
                                ржЕрзНржпрж╛ржбржорж┐ржи ржкрзНржпрж╛ржирзЗрж▓
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderQuizScreen() {
            const currentQ = QUESTIONS[state.currentQuestion];
            const progress = ((state.currentQuestion + 1) / QUESTIONS.length) * 100;

            let optionsHTML = '';
            if (currentQ.type === 'mcq') {
                optionsHTML = currentQ.options.map((option, index) => `
                    <button
                        onclick="selectAnswer(${currentQ.id}, ${index})"
                        class="w-full text-right p-4 rounded-lg border-2 transition duration-200 ${
                            state.answers[currentQ.id] === index
                                ? 'border-green-600 bg-green-50'
                                : 'border-gray-300 hover:border-green-400'
                        }"
                    >
                        <span class="font-semibold">${String.fromCharCode(65 + index)}.</span> ${option}
                    </button>
                `).join('');
            } else {
                optionsHTML = `
                    <textarea
                        id="shortAnswer"
                        onchange="updateShortAnswer(${currentQ.id})"
                        class="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none"
                        rows="4"
                        placeholder="ржПржЦрж╛ржирзЗ ржЖржкржирж╛рж░ ржЙрждрзНрждрж░ рж▓рж┐ржЦрзБржи..."
                    >${state.answers[currentQ.id] || ''}</textarea>
                `;
            }

            return `
                <div class="max-w-4xl mx-auto p-4">
                    <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
                        <div class="flex justify-between items-center">
                            <div class="text-green-800 font-bold">
                                ржкрзНрж░рж╢рзНржи ${state.currentQuestion + 1} / ${QUESTIONS.length}
                            </div>
                            <div class="flex items-center gap-2 text-red-600 font-bold text-xl">
                                тП░ <span id="timer">${formatTime(state.timeLeft)}</span>
                            </div>
                        </div>
                        <div class="mt-2 bg-gray-200 rounded-full h-2">
                            <div
                                class="bg-green-600 h-2 rounded-full transition-all duration-300"
                                style="width: ${progress}%"
                            ></div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-lg p-6 mb-4">
                        <div class="mb-4">
                            <span class="inline-block bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold mb-3">
                                ${currentQ.type === 'mcq' ? 'ржмрж╣рзБржирж┐рж░рзНржмрж╛ржЪржирзА' : 'рж╕ржВржХрзНрж╖рж┐ржкрзНржд ржЙрждрзНрждрж░'}
                            </span>
                            <h2 class="text-xl font-bold text-gray-800">
                                ${currentQ.question}
                            </h2>
                        </div>

                        <div class="space-y-3">
                            ${optionsHTML}
                        </div>
                    </div>

                    <div class="flex gap-4">
                        <button
                            onclick="prevQuestion()"
                            ${state.currentQuestion === 0 ? 'disabled' : ''}
                            class="px-6 py-3 bg-gray-300 hover:bg-gray-400 disabled:bg-gray-200 disabled:cursor-not-allowed rounded-lg font-bold transition"
                        >
                            ржкрзВрж░рзНржмржмрж░рзНрждрзА
                        </button>

                        ${state.currentQuestion < QUESTIONS.length - 1 ? `
                            <button
                                onclick="nextQuestion()"
                                class="flex-1 px-6 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-bold transition"
                            >
                                ржкрж░ржмрж░рзНрждрзА ржкрзНрж░рж╢рзНржи
                            </button>
                        ` : `
                            <button
                                onclick="submitQuiz()"
                                class="flex-1 px-6 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-bold transition"
                            >
                                ржЬржорж╛ ржжрж┐ржи
                            </button>
                        `}
                    </div>
                </div>
            `;
        }

        function renderSubmittedScreen() {
            return `
                <div class="min-h-screen flex items-center justify-center p-4">
                    <div class="bg-white rounded-2xl shadow-2xl p-8 max-w-md text-center">
                        <div class="text-6xl mb-4">тЬЕ</div>
                        <h2 class="text-3xl font-bold text-green-800 mb-2">
                            ржЬржорж╛ рж╕ржлрж▓ рж╣ржпрж╝рзЗржЫрзЗ!
                        </h2>
                        <p class="text-gray-600 mb-4">
                            ${state.participant.name}, ржЖржкржирж╛рж░ ржЙрждрзНрждрж░ржкрждрзНрж░ рж╕ржлрж▓ржнрж╛ржмрзЗ ржЬржорж╛ рж╣ржпрж╝рзЗржЫрзЗред
                        </p>
                        <p class="text-gray-700 font-semibold">
                            ржлрж▓рж╛ржлрж▓ рж╢рзАржШрзНрж░ржЗ ржШрзЛрж╖ржгрж╛ ржХрж░рж╛ рж╣ржмрзЗ ржЗржирж╢рж╛ржЖрж▓рзНрж▓рж╛рж╣ред
                        </p>
                        <div class="mt-6 text-sm text-gray-500">
                            ржЖрж▓рзНрж▓рж╛рж╣ ржЖржкржирж╛ржХрзЗ ржЙрждрзНрждржо ржкрзНрж░рждрж┐ржжрж╛ржи ржжрж┐ржиред ЁЯд▓
                        </div>
                    </div>
                </div>
            `;
        }

        function renderAdminPanel() {
            loadSubmissions();
            
            const rows = state.submissions.map((sub, idx) => `
                <tr class="border-b hover:bg-gray-50">
                    <td class="px-4 py-3 text-right">${sub.name}</td>
                    <td class="px-4 py-3 text-right">${sub.phone}</td>
                    <td class="px-4 py-3 text-center">
                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded">
                            ${sub.mcqCorrect}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-center">
                        <span class="bg-red-100 text-red-800 px-2 py-1 rounded">
                            ${sub.mcqWrong}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-center">
                        <span class="bg-gray-100 text-gray-800 px-2 py-1 rounded">
                            ${sub.mcqUnanswered}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-center">${sub.timeTaken}</td>
                    <td class="px-4 py-3 text-right text-sm">${sub.submittedAt}</td>
                </tr>
            `).join('');

            return `
                <div class="max-w-7xl mx-auto p-4">
                    <div class="bg-white rounded-xl shadow-lg p-6 mb-4">
                        <div class="flex justify-between items-center">
                            <h1 class="text-2xl font-bold text-gray-800">ржЕрзНржпрж╛ржбржорж┐ржи ржкрзНржпрж╛ржирзЗрж▓</h1>
                            <button
                                onclick="backToStart()"
                                class="px-4 py-2 bg-gray-300 hover:bg-gray-400 rounded-lg"
                            >
                                ржкрзНрж░рж╕рзНржерж╛ржи
                            </button>
                        </div>
                        <p class="text-gray-600 mt-2">ржорзЛржЯ ржЬржорж╛: ${state.submissions.length}ржЯрж┐</p>
                    </div>

                    <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-green-600 text-white">
                                    <tr>
                                        <th class="px-4 py-3 text-right">ржирж╛ржо</th>
                                        <th class="px-4 py-3 text-right">ржорзЛржмрж╛ржЗрж▓</th>
                                        <th class="px-4 py-3 text-center">рж╕ржарж┐ржХ</th>
                                        <th class="px-4 py-3 text-center">ржнрзБрж▓</th>
                                        <th class="px-4 py-3 text-center">ржЙрждрзНрждрж░рж╣рзАржи</th>
                                        <th class="px-4 py-3 text-center">рж╕ржоржпрж╝</th>
                                        <th class="px-4 py-3 text-right">ржЬржорж╛рж░ рж╕ржоржпрж╝</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${rows}
                                </tbody>
                            </table>
                        </div>
                    </div>

                    ${state.submissions.length === 0 ? `
                        <div class="text-center text-gray-500 mt-8">
                            ржПржЦржирзЛ ржХрзЛржирзЛ ржЬржорж╛ ржирзЗржЗ
                        </div>
                    ` : ''}
                </div>
            `;
        }

        // Render main app
        function render() {
            const app = document.getElementById('app');
            
            if (state.view === 'start') {
                app.innerHTML = renderStartScreen();
            } else if (state.view === 'quiz') {
                app.innerHTML = renderQuizScreen();
            } else if (state.view === 'submitted') {
                app.innerHTML = renderSubmittedScreen();
            } else if (state.view === 'admin') {
                app.innerHTML = renderAdminPanel();
            }
        }

        // Event handlers
        function startQuizHandler() {
            state.participant.name = document.getElementById('name').value;
            state.participant.phone = document.getElementById('phone').value;
            startQuiz();
        }

        function selectAnswer(questionId, answerIndex) {
            state.answers[questionId] = answerIndex;
            render();
        }

        function updateShortAnswer(questionId) {
            state.answers[questionId] = document.getElementById('shortAnswer').value;
        }

        function nextQuestion() {
            if (state.currentQuestion < QUESTIONS.length - 1) {
                state.currentQuestion++;
                render();
            }
        }

        function prevQuestion() {
            if (state.currentQuestion > 0) {
                state.currentQuestion--;
                render();
            }
        }

        function adminLogin() {
            const password = prompt('ржЕрзНржпрж╛ржбржорж┐ржи ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб:');
            if (password === 'admin123') {
                state.view = 'admin';
                render();
            } else {
                alert('ржнрзБрж▓ ржкрж╛рж╕ржУржпрж╝рж╛рж░рзНржб');
            }
        }

        function backToStart() {
            state.view = 'start';
            state.currentQuestion = 0;
            state.answers = {};
            state.timeLeft = 60 * 60;
            render();
        }

        // Initialize app
        render();
    </script>
</body>
</html>